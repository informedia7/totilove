/**
 * Base Styles (Mobile-First)
 * 
 * CSS Reset, Normalize, and Base Element Styles
 * NO media queries here - this IS mobile CSS
 * Desktop enhancements go in 04-responsive.css
 * 
 * Extracted from:
 * - app/components/layouts/layout.html (inline styles)
 * - app/assets/css/talk.css (reset styles)
 * - Common base patterns
 * 
 * Migration Phase 1: Week 6
 */

/* ===== CSS RESET ===== */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* Prevent horizontal scrolling globally - but allow app-container and profile-modal to be wider */
*:not(.app-container):not(.profile-modal):not(.profile-modal *),
*:not(.app-container):not(.profile-modal)::before,
*:not(.app-container):not(.profile-modal)::after {
    max-width: 100vw !important;
}

html {
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-family, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif);
    background: linear-gradient(135deg, var(--primary, #667eea) 0%, var(--secondary, #764ba2) 100%);
    margin: 0;
    min-height: 100vh;
    color: var(--text-color, #222);
    padding: 0;
    line-height: var(--line-height, 1.6);
    overflow-x: hidden !important;
}

/* ===== TYPOGRAPHY ===== */
h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: var(--line-height-tight, 1.2);
    color: var(--text-color, #333);
    margin: 0;
}

h1 {
    font-size: var(--f-3xl, 1.8rem);
}

h2 {
    font-size: var(--f-2xl, 1.5rem);
}

h3 {
    font-size: var(--f-xl, 1.25rem);
}

h4 {
    font-size: var(--f-lg, 1.125rem);
}

h5 {
    font-size: var(--f-md, 1rem);
}

h6 {
    font-size: var(--f-sm, 0.875rem);
}

p {
    margin: 0 0 var(--md, 1rem);
    line-height: var(--line-height, 1.6);
}

p:last-child {
    margin-bottom: 0;
}

a {
    color: var(--primary, #667eea);
    text-decoration: none;
    transition: color var(--transition-fast, 0.2s ease);
}

a:hover {
    color: var(--primary-dark, #5568d3);
    text-decoration: underline;
}

a:focus {
    outline: 2px solid var(--primary, #667eea);
    outline-offset: 2px;
    border-radius: 2px;
}

a:focus:not(:focus-visible) {
    outline: none;
}

/* ===== LISTS ===== */
ul, ol {
    list-style: none;
    padding: 0;
    margin: 0;
}

li {
    margin: 0;
}

/* ===== IMAGES ===== */
img {
    max-width: 100%;
    height: auto;
    display: block;
    border-style: none;
}

img[loading="lazy"] {
    opacity: 0;
    transition: opacity 0.3s;
}

img[loading="lazy"].loaded {
    opacity: 1;
}

/* ===== FORM ELEMENTS ===== */
button,
input,
select,
textarea {
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
    margin: 0;
}

button {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
}

button:disabled {
    cursor: not-allowed;
    opacity: 0.6;
}

input,
textarea,
select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0;
}

input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button {
    -webkit-appearance: none;
}

/* ===== TABLES ===== */
table {
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;
}

th, td {
    padding: var(--sm, 0.5rem);
    text-align: left;
    border-bottom: 1px solid var(--border-color, #e0e0e0);
}

th {
    font-weight: 600;
    color: var(--text-color, #333);
}

/* ===== CODE ===== */
code,
pre {
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.9em;
}

code {
    padding: 0.2em 0.4em;
    background: var(--bg-light, #f8f9fa);
    border-radius: var(--r-sm, 8px);
}

pre {
    padding: var(--md, 1rem);
    background: var(--bg-light, #f8f9fa);
    border-radius: var(--r-md, 12px);
    overflow-x: auto;
}

pre code {
    padding: 0;
    background: none;
}

/* ===== HORIZONTAL RULE ===== */
hr {
    border: none;
    border-top: 1px solid var(--border-color, #e0e0e0);
    margin: var(--lg, 1.5rem) 0;
}

/* ===== EMOJI SUPPORT ===== */
.emoji,
button:contains('üìé'),
button:contains('üòä'),
button:contains('üîç'),
button:contains('‚û§'),
.empty-state-icon,
.filter-dropdown-search-icon,
.search-icon,
.date-icon {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif !important;
    font-variant-emoji: emoji !important;
    font-feature-settings: "liga" off !important;
}

/* ===== ACCESSIBILITY ===== */
/* Skip to main content link */
.skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--primary, #667eea);
    color: white;
    padding: var(--sm, 0.5rem) var(--md, 1rem);
    text-decoration: none;
    z-index: 10000;
    border-radius: 0 0 var(--r-md, 12px) 0;
}

.skip-link:focus {
    top: 0;
}

/* Screen reader only */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

/* Focus visible */
:focus-visible {
    outline: 2px solid var(--primary, #667eea);
    outline-offset: 2px;
    border-radius: var(--r-sm, 8px);
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* High contrast mode */
@media (prefers-contrast: high) {
    * {
        border-color: currentColor !important;
    }
}

/* ===== UTILITY CLASSES ===== */
.text-center {
    text-align: center;
}

.text-left {
    text-align: left;
}

.text-right {
    text-align: right;
}

.text-muted {
    color: var(--text-muted, #777);
}

.text-primary {
    color: var(--primary, #667eea);
}

.text-success {
    color: var(--success, #00b894);
}

.text-danger {
    color: var(--danger, #d63031);
}

.text-warning {
    color: var(--warning, #ffc107);
}

.hidden {
    display: none !important;
}

.visible {
    display: block !important;
}

.invisible {
    visibility: hidden;
}

.opacity-0 {
    opacity: 0;
}

.opacity-50 {
    opacity: 0.5;
}

.opacity-100 {
    opacity: 1;
}

/* ===== TOUCH TARGETS ===== */
/* Ensure all interactive elements meet minimum touch target size */
button,
a,
input[type="button"],
input[type="submit"],
input[type="reset"],
[role="button"] {
    min-height: var(--touch-target, 44px);
    min-width: var(--touch-target, 44px);
    -webkit-tap-highlight-color: transparent;
}

/* ===== SCROLLING ===== */
#app-root {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: none;
}

/* Smooth scrolling for supported browsers */
@supports (scroll-behavior: smooth) {
    html {
        scroll-behavior: smooth;
    }
}

/* ===== PRINT STYLES ===== */
@media print {
    * {
        background: white !important;
        color: black !important;
        box-shadow: none !important;
    }

    a {
        text-decoration: underline;
    }

    .no-print {
        display: none !important;
    }
}
