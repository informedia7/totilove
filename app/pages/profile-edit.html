<!-- External CSS and JS files -->
<!-- Extracted CSS from profile-edit.html - Phase 1 CSS Extraction -->
<link rel="stylesheet" href="/assets/css/new/05-pages/_profile-edit.css">
<script src="/assets/js/new/components/i-info-tooltip.js"></script>
<!-- Profile Edit Page JavaScript - Moved to new structure (Phase 1 CSS/JS Extraction) -->
<script src="/assets/js/new/pages/profile-edit/DropdownManager.js"></script>
<script src="/assets/js/new/pages/profile-edit/FormHandler.js"></script>
<script src="/assets/js/new/pages/profile-edit/MultiSelectManager.js"></script>
<script src="/assets/js/new/pages/profile-edit/LanguageMultiSelectManager.js"></script>
<script src="/assets/js/new/pages/profile-edit/form-config.js"></script>
<script src="/assets/js/shared/age-validation.js"></script>
<script src="/assets/js/new/pages/profile-edit/profile-edit-init.js"></script>
<!-- Debug script to find Region error -->
<script src="/assets/js/new/pages/profile-edit/debug-region-error.js"></script>
<script src="/assets/js/new/pages/profile-edit/mobile-tab-navigation.js"></script>

<!-- Profile tabs with sub-navigation -->
<div class="profile-tabs">
    <a href="/profile-full" class="tab-btn" id="tab-full">My Profile</a>
    <a href="/profile-photos" class="tab-btn" id="tab-photos">My Photos</a>
    <a href="/profile-edit" class="tab-btn active" id="tab-edit">Edit Profile</a>
    <a href="/profile-stats" class="tab-btn" id="tab-stats">My Stats</a>
</div>

<!-- Edit Profile Form -->
<div id="tab-panel-edit" class="settings-section">
    <div class="card-header profile-edit-header">
        <div class="card-title">
            <div class="card-icon">
                <i class="fas fa-edit"></i>
            </div>
            <span>Edit My Profile</span>
        </div>
        <div class="profile-completion-summary">
            <div class="profile-completion-line" data-profile-completion-badge>
                <div class="completion-line-header">
                    <span class="completion-line-label">Profile completion</span>
                    <span class="completion-line-percentage" data-profile-completion-percentage>{{profileCompletionPercentage}}%</span>
                </div>
                <div class="completion-line-track" aria-hidden="true">
                    <div class="completion-line-fill" data-profile-completion-fill style="width: {{profileCompletionPercentage}}%;"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="mobile-card-tab-group">
        <a href="#about-me-card" class="mobile-card-tab active">
            <i class="fas fa-user"></i>
            <span>About Me</span>
        </a>
        <a href="#person-looking-card" class="mobile-card-tab">
            <i class="fas fa-search"></i>
            <span>Person I'm Looking For</span>
        </a>
    </div>
    
    <div class="profile-content">
        <div class="profile-cards-container">
            <!-- About Me Column -->
            <div class="profile-card edit-card" id="about-me-card">
                    <form id="about-me-form" method="POST" action="/api/profile/update">
                        <input type="hidden" name="sessionToken" value="{{sessionToken}}">
                        <input type="hidden" name="userId" value="{{userId}}">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-user"></i>
                                About Me
                            </h3>
                        </div>
                        <div class="card-content">
                        <!-- About Me Card -->
                        <div class="about-me-section about-me-editor">
                            <h4 class="section-title">
                                <i class="fas fa-info-circle"></i>
                                Short Intro
                            </h4>
                            <div class="form-group">
                                <label for="about-edit" class="sr-only">Short Intro</label>
                                <textarea id="about-edit" name="aboutMe" placeholder="Tell others about yourself..." rows="4" maxlength="2000">{{aboutMe}}</textarea>
                                <div class="char-counter" id="about-edit-counter">
                                    <span id="about-edit-count">0</span> / 2000 characters
                                </div>
                            </div>
                        </div>

                <!-- Personal Information Card -->
                <div class="card-wrapper personal-info-card">
                    <h4 class="card-title-above">
                        <i class="fas fa-user-circle"></i>
                        Personal Information
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                                <div class="form-row">
                                    <div class="form-group" style="position: relative;">
                                        <label for="real-name" class="form-label-standard">
                                            Name *
                                            <button type="button" class="info-button" id="name-info-btn" title="Show name information">
                                                <i class="fas fa-info-circle" id="name-info-icon"></i>
                                            </button>
                                        </label>
                                        <div id="nameInfo" class="info-tooltip">
                                            <i class="fas fa-info-circle"></i>
                                            <span>Your name will be displayed on your profile. Only letters are accepted (2-100 characters). The first letter will be automatically capitalized.</span>
                                            <div class="info-tooltip-arrow"></div>
                                        </div>
                                        <input type="text" id="real-name" name="real_name" 
                                               value="{{realName}}" 
                                               minlength="2" maxlength="100" required 
                                               placeholder="Enter your full name"
                                               autocomplete="name"
                                               class="form-input-standard">
                                        <div class="char-counter" id="real-name-counter">
                                            <span id="real-name-count">0</span> / 100 characters
                                        </div>
                                    </div>
                                    <div class="form-group" style="position: relative;">
                                        <label for="gender-edit" class="form-label-standard">
                                            Gender: *
                                            <button type="button" class="info-button" id="gender-info-btn" title="Show gender information">
                                                <i class="fas fa-info-circle" id="gender-info-icon"></i>
                                            </button>
                                        </label>
                                        <div id="genderInfo" class="info-tooltip">
                                            <i class="fas fa-info-circle"></i>
                                            <span>Gender cannot be changed after registration. Contact support if you need assistance.</span>
                                            <div class="info-tooltip-arrow"></div>
                                        </div>
                                        <input type="hidden" id="current-gender" value="{{userGenderRaw}}">
                                        <select id="gender-edit" name="gender" required disabled autocomplete="sex" class="form-select-disabled">
                                            <option value="">Select gender</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="country">Country *</label>
                                        <input type="hidden" id="current-country-id" value="{{countryId}}">
                                        <select id="country" name="country" class="form-select" required autocomplete="country-name">
                                            <option value="">Select Country</option>
                                        </select>
                                    </div>
                                    <div class="form-group" id="state-container" style="display: none;">
                                        <label for="state">State <span id="state-required" style="display: none;">*</span></label>
                                        <input type="hidden" id="current-state-id" value="{{stateId}}">
                                        <select id="state" name="state" class="form-select" autocomplete="address-level1">
                                            <option value="">Select State First</option>
                                        </select>
                                    </div>
                                    <div class="form-group" id="city-container" style="display: none;">
                                        <label for="city">City <span id="city-required" style="display: none;">*</span></label>
                                        <input type="hidden" id="current-city-id" value="{{cityId}}">
                                        <select id="city" name="city" class="form-select" autocomplete="address-level2">
                                            <option value="">Select City First</option>
                                        </select>
                                    </div>
                                </div>
                        </div>
                    </div>
                </div>
                
                <!-- Physical Appearance Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-user"></i>
                        Physical Appearance
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="height-select">Height:</label>
                                    <input type="hidden" id="current-height-reference-id" value="{{height_reference_id}}">
                                    <input type="hidden" id="current-height-cm" value="{{height_cm}}">
                                    <select id="height-select" name="height_reference_id">
                                        <option value="">Select height</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="weight-kg">Weight (kg):</label>
                                    <input type="hidden" id="current-weight-reference-id" value="{{weight_reference_id}}">
                                    <input type="hidden" id="current-weight-kg" value="{{weight_kg}}">
                                    <select id="weight-kg" name="weight_reference_id">
                                        <option value="">Select weight</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="body-type">Body Type:</label>
                                    <input type="hidden" id="current-body-type" value="{{bodyTypeName}}">
                                    <select id="body-type" name="body_type">
                                        <option value="">Select body type</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="eye-color">Eye Color:</label>
                                    <input type="hidden" id="current-eye-color" value="{{eyeColorName}}">
                                    <select id="eye-color" name="eye_color">
                                        <option value="">Select eye color</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="hair-color">Hair Color:</label>
                                    <input type="hidden" id="current-hair-color" value="{{hairColorName}}">
                                    <select id="hair-color" name="hair_color">
                                        <option value="">Select hair color</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="ethnicity">Ethnicity:</label>
                                    <input type="hidden" id="current-ethnicity" value="{{ethnicityName}}">
                                    <select id="ethnicity" name="ethnicity">
                                        <option value="">Select ethnicity</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="body-art">Body Art:</label>
                                <input type="hidden" id="current-body-art" value="{{bodyArtName}}">
                                <select id="body-art" name="body_art">
                                    <option value="">Select body art</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Career & Education Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-graduation-cap"></i>
                        Career & Education
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="education">Education:</label>
                                    <input type="hidden" id="current-education" value="{{educationName}}">
                                    <select id="education" name="education">
                                        <option value="">Select education level</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="occupation">Occupation:</label>
                                <input type="hidden" id="current-occupation" value="{{occupationName}}">
                                <select id="occupation" name="occupation">
                                    <option value="">Select occupation</option>
                                </select>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="income">Income:</label>
                                    <input type="hidden" id="current-income" value="{{incomeName}}">
                                    <select id="income" name="income">
                                        <option value="">Select income range</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Lifestyle & Habits Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-heart"></i>
                        Lifestyle & Habits
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="smoking">Smoking:</label>
                                    <input type="hidden" id="current-smoking" value="{{smokingName}}">
                                    <select id="smoking" name="smoking">
                                        <option value="">Select smoking</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="drinking">Drinking:</label>
                                    <input type="hidden" id="current-drinking" value="{{drinkingName}}">
                                    <select id="drinking" name="drinking">
                                        <option value="">Select drinking</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="exercise">Exercise:</label>
                                    <input type="hidden" id="current-exercise" value="{{exerciseName}}">
                                    <select id="exercise" name="exercise">
                                        <option value="">Select exercise habits</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="living-situation">Living Situation:</label>
                                    <input type="hidden" id="current-living-situation" value="{{livingSituationName}}">
                                    <select id="living-situation" name="living_situation">
                                        <option value="">Select living situation</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="lifestyle">Lifestyle:</label>
                                    <input type="hidden" id="current-lifestyle" value="{{lifestyleName}}">
                                    <select id="lifestyle" name="lifestyle">
                                        <option value="">Select lifestyle</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Family & Status Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-users"></i>
                        Family & Status
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="have-children">About Children:</label>
                                    <input type="hidden" id="current-have-children" value="{{haveChildrenName}}">
                                    <input type="hidden" id="current-have-children-id" value="{{haveChildrenId}}">
                                    <select id="have-children" name="have_children">
                                        <option value="">Select children status</option>
                                    </select>
                                </div>
                                <div class="form-group" id="number-of-children-container" style="display: none;">
                                    <label for="number-of-children">How many children:</label>
                                    <input type="hidden" id="current-number-of-children" value="{{numberOfChildrenName}}">
                                    <input type="hidden" id="current-number-of-children-id" value="{{numberOfChildrenId}}">
                                    <select id="number-of-children" name="number_of_children">
                                        <option value="">Select</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="marital-status">Marital Status:</label>
                                    <input type="hidden" id="current-marital-status" value="{{maritalStatusName}}">
                                    <select id="marital-status" name="marital_status">
                                        <option value="">Select marital status</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="relocation">Relocation:</label>
                                <input type="hidden" id="current-relocation" value="{{relocationName}}">
                                <select id="relocation" name="relocation">
                                    <option value="">Select relocation</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Additional Preferences Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-sliders-h"></i>
                        Additional
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="religion">Religion:</label>
                                    <input type="hidden" id="current-religion" value="{{religionName}}">
                                    <select id="religion" name="religion">
                                        <option value="">Select religion</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Interests & Activities Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-star"></i>
                        Interests & Activities
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-group">
                                <label for="interests-edit">Interests (<span id="selected-interests-count">0</span>/10):</label>
                                <input type="hidden" id="current-interest-category" value="{{interest_category}}">
                                <div style="margin-bottom: 1rem;">
                                    <div id="selected-interests" style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem;">
                                        <!-- Selected interests will be populated here -->
                                    </div>
                                    <select id="interests-edit" name="interest_categories[]" style="padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; background: white;">
                                        <option value="">Select an interest...</option>
                                        <!-- Interests will be populated here -->
                                    </select>
                                    <p style="font-size: 0.9rem; color: var(--muted-color); margin-top: 0.5rem;">Select interests from the dropdown above</p>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="hobbies-select">Hobbies (<span id="selected-hobbies-count">0</span>/10):</label>
                                <input type="hidden" id="current-hobbies" value="{{hobbies_list}}">
                                <div style="margin-bottom: 1rem;">
                                    <div id="selected-hobbies" style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem;">
                                        <!-- Selected hobbies will be populated here -->
                                    </div>
                                    <select id="hobbies-select" name="hobbies[]" style="padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; background: white;">
                                        <option value="">Select a hobby...</option>
                                        <!-- Hobbies will be populated here -->
                                    </select>
                                    <p style="font-size: 0.9rem; color: var(--muted-color); margin-top: 0.5rem;">Select hobbies from the dropdown above</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Languages I Speak Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-language"></i>
                        Languages I Speak
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-group" style="margin-bottom: 2rem;">
                                <button type="button" id="select-language-label" class="profile-action-btn" style="background: linear-gradient(90deg, #667eea, #5a6fd8); color: white; border: none; padding: 0.6rem 1.4rem; border-radius: 30px; font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 0.4rem;">
                                    <i class="fas fa-language"></i>
                                    Select Language
                                </button>
                                <input type="hidden" id="current-languages" value="{{languages_list}}">
                                <select id="languages-select" name="languages[]" style="display: none;">
                                    <option value="">Select a language...</option>
                                    <!-- Languages will be populated here -->
                                </select>
                                <div id="inline-language-select-container" style="display: none; margin-top: 0.5rem;">
                                    <!-- Inline language list will appear here -->
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="languages-select">Languages I Speak (<span id="selected-languages-count">0</span>/10):</label>
                                <div style="margin-bottom: 1rem;">
                                    <div id="selected-languages" style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem;" role="group" aria-label="Selected languages">
                                        <!-- Selected languages with flags will be populated here -->
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--muted-color); margin-top: 0.5rem;">Click on a language badge to edit details.</p>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="english-ability">English Ability:</label>
                                <input type="hidden" id="current-english-ability" value="{{englishAbilityName}}">
                                <select id="english-ability" name="english_ability">
                                    <option value="">Select English ability</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="save-btn" id="save-about-me-btn">
                                <i class="fas fa-save"></i>
                                Save About Me
                            </button>
                        </div>
                    </form>
                </div>

            <!-- What I'm Looking For Column -->
            <div class="profile-card edit-card" id="person-looking-card">
                    <form id="preferences-form" method="POST" action="/api/profile/update">
                        <input type="hidden" name="sessionToken" value="{{sessionToken}}">
                        <input type="hidden" name="userId" value="{{userId}}">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-search"></i>
                                What I'm Looking For
                            </h3>
                        </div>
                        <div class="card-content">
                        <!-- About the Person I'm Looking For Card -->
                        <div class="about-me-section looking-for-editor">
                            <h4 class="section-title">
                                <i class="fas fa-info-circle"></i>
                                About the Person I'm Looking For
                            </h4>
                            <div class="form-group">
                                <label for="partner-preferences-edit" class="sr-only">About the Person I'm Looking For</label>
                                <textarea id="partner-preferences-edit" name="partner_preferences" placeholder="Short info about the person you're looking for..." rows="4" maxlength="2000">{{partnerPreferences}}</textarea>
                                <div class="char-counter" id="partner-preferences-edit-counter">
                                    <span id="partner-preferences-edit-count">0</span> / 2000 characters
                                </div>
                            </div>
                        </div>

                <!-- Preferred Basic Criteria Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-filter"></i>
                        Preferred Basic Criteria
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-age-min">Age Min:</label>
                                    <input type="number" id="preferred-age-min" name="preferred_age_min" value="{{preferredAgeMin}}" min="18" max="100">
                                </div>
                                <div class="form-group">
                                    <label for="preferred-age-max">Age Max:</label>
                                    <input type="number" id="preferred-age-max" name="preferred_age_max" value="{{preferredAgeMax}}" min="18" max="100">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-gender">Gender:</label>
                                    <input type="hidden" id="current-preferred-gender" value="{{preferredGenderRaw}}">
                                    <select id="preferred-gender" name="preferred_gender">
                                        <option value="">Select gender</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="relationship-type">Relationship Type:</label>
                                    <input type="hidden" id="current-relationship-type" value="{{relationshipType}}">
                                    <select id="relationship-type" name="relationship_type" class="form-select">
                                        <option value="">Select relationship type</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-distance">Distance (km / miles):</label>
                                    <input type="hidden" id="current-preferred-distance" value="{{preferredDistance}}">
                                    <select id="preferred-distance" name="preferred_distance">
                                        <option value="">Select distance</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="preferred-country-select" style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Preferred Countries (<span id="selected-preferred-countries-count">0</span>/10)</label>
                                <div style="margin-bottom: 1rem;">
                                    <div id="selected-preferred-countries" style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem;">
                                        <!-- Selected countries will be populated here -->
                                    </div>
                                    <select id="preferred-country-select" name="preferred_countries[]" style="padding: 0.75rem; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem; background: white;">
                                        <option value="">Select a country...</option>
                                        <!-- Countries will be populated here -->
                                    </select>
                                    <p style="font-size: 0.9rem; color: #6c757d; margin-top: 0.5rem;">Select countries from the dropdown above</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Preferred Physical Appearance Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-user"></i>
                        Preferred Physical Appearance
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-height">Height:</label>
                                    <select id="preferred-height" name="preferred_height_reference_id">
                                        <option value="">Select height</option>
                                        <option value="0">Not important</option>
                                    </select>
                                    <input type="hidden" id="current-preferred-height-reference-id" value="{{preferredHeightReferenceId}}">
                                    <input type="hidden" id="current-preferred-height-cm" value="{{preferredHeight}}">
                                </div>
                                <div class="form-group">
                                    <label for="preferred-weight">Weight:</label>
                                    <select id="preferred-weight" name="preferred_weight_reference_id">
                                        <option value="">Select weight</option>
                                    </select>
                                    <input type="hidden" id="current-preferred-weight-reference-id" value="{{preferredWeightReferenceId}}">
                                    <input type="hidden" id="current-preferred-weight-kg" value="{{preferredWeight}}">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-body-type">Body Type:</label>
                                    <input type="hidden" id="current-preferred-body-type" value="{{preferredBodyType}}">
                                    <select id="preferred-body-type" name="preferred_body_type">
                                        <option value="">Select body type</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="preferred-eye-color">Eye Color:</label>
                                    <input type="hidden" id="current-preferred-eye-color" value="{{preferredEyeColor}}">
                                    <select id="preferred-eye-color" name="preferred_eye_color">
                                        <option value="">Select eye color</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-hair-color">Hair Color:</label>
                                    <input type="hidden" id="current-preferred-hair-color" value="{{preferredHairColor}}">
                                    <select id="preferred-hair-color" name="preferred_hair_color">
                                        <option value="">Select hair color</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="preferred-ethnicity">Ethnicity:</label>
                                    <input type="hidden" id="current-preferred-ethnicity" value="{{preferredEthnicity}}">
                                    <select id="preferred-ethnicity" name="preferred_ethnicity">
                                        <option value="">Select ethnicity</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="preferred-body-art">Body Art:</label>
                                <input type="hidden" id="current-preferred-body-art" value="{{preferredBodyArt}}">
                                <select id="preferred-body-art" name="preferred_body_art">
                                    <option value="">Select body art</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Preferred Career & Education Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-graduation-cap"></i>
                        Preferred Career & Education
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-education">Education:</label>
                                    <input type="hidden" id="current-preferred-education" value="{{preferredEducation}}">
                                    <select id="preferred-education" name="preferred_education">
                                        <option value="">Select education</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="preferred-occupation">Occupation:</label>
                                <input type="hidden" id="current-preferred-occupation" value="{{preferredOccupation}}">
                                <select id="preferred-occupation" name="preferred_occupation">
                                    <option value="">Select occupation</option>
                                </select>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-income">Income:</label>
                                    <input type="hidden" id="current-preferred-income" value="{{preferredIncome}}">
                                    <select id="preferred-income" name="preferred_income">
                                        <option value="">Select income</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Preferred Lifestyle & Habits Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-heart"></i>
                        Preferred Lifestyle & Habits
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-smoking">Smoking:</label>
                                    <input type="hidden" id="current-preferred-smoking" value="{{preferredSmoking}}">
                                    <select id="preferred-smoking" name="preferred_smoking">
                                        <option value="">Select smoking</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="preferred-drinking">Drinking:</label>
                                    <input type="hidden" id="current-preferred-drinking" value="{{preferredDrinking}}">
                                    <select id="preferred-drinking" name="preferred_drinking">
                                        <option value="">Select drinking</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-exercise">Exercise:</label>
                                    <input type="hidden" id="current-preferred-exercise" value="{{preferredExercise}}">
                                    <select id="preferred-exercise" name="preferred_exercise">
                                        <option value="">Select exercise habits</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-lifestyle">Lifestyle:</label>
                                    <input type="hidden" id="current-preferred-lifestyle" value="{{preferredLifestyle}}">
                                    <select id="preferred-lifestyle" name="preferred_lifestyle">
                                        <option value="">Select lifestyle</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Preferred Family & Status Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-users"></i>
                        Preferred Family & Status
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-children">Children Status:</label>
                                    <input type="hidden" id="current-preferred-children" value="{{preferredChildren}}">
                                    <select id="preferred-children" name="preferred_children">
                                        <option value="">Select children status</option>
                                    </select>
                                </div>
                                <div class="form-group" id="preferred-number-of-children-container" style="display: none;">
                                    <label for="preferred-number-of-children">How many children:</label>
                                    <input type="hidden" id="current-preferred-number-of-children" value="{{preferredNumberOfChildren}}">
                                    <input type="hidden" id="current-preferred-number-of-children-id" value="{{preferredNumberOfChildrenId}}">
                                    <select id="preferred-number-of-children" name="preferred_number_of_children">
                                        <option value="">Select</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-marital-status">Marital Status:</label>
                                    <input type="hidden" id="current-preferred-marital-status" value="{{preferredMaritalStatus}}">
                                    <select id="preferred-marital-status" name="preferred_marital_status">
                                        <option value="">Select marital status</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Additional Preferences Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-sliders-h"></i>
                        Additional Preferences
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="preferred-religion">Religion:</label>
                                    <input type="hidden" id="current-preferred-religion" value="{{preferredReligion}}">
                                    <select id="preferred-religion" name="preferred_religion">
                                        <option value="">Select religion</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Languages Card -->
                <div class="card-wrapper">
                    <h4 class="card-title-above">
                        <i class="fas fa-language"></i>
                        Languages
                    </h4>
                    <div class="inner-card compact-card">
                        <div class="card-content-inner">
                            <div class="form-group">
                                <label for="preferred-english-ability">English Ability:</label>
                                <input type="hidden" id="current-preferred-english-ability" value="{{preferredEnglishAbility}}">
                                <select id="preferred-english-ability" name="preferred_english_ability">
                                    <option value="">Select preferred English ability</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="save-btn" id="save-preferences-btn">
                                <i class="fas fa-save"></i>
                                Save Preferences
                            </button>
                        </div>
                    </form>
                </div>
        </div>
    </div>
    
    <div class="form-actions-bottom">
        <button type="button" class="cancel-btn">
            <i class="fas fa-times"></i>
            Cancel
        </button>
    </div>
</div>

<!-- Languages Modal CSS now loaded via main.css or components.css -->
<script src="/components/modals/languages-modal.js"></script>
<div id="languages-modal-container"></div>

