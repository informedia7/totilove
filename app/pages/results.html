<!-- Include User Profile Modal -->
{{include:modals/user-profile-modal}}

<!-- Include User Report Modal -->
{{include:modals/user-report-modal}}

    <!-- Presence engine + refresh are loaded globally via layout scripts -->

<!-- Include Universal Message Modal -->
{{include:modals/universal-message-modal}}

<!-- Universal component styles (includes user-card) -->
<link rel="stylesheet" href="/assets/css/new/02-components/components.css">

<!-- Extracted CSS from results.html - Phase 1 CSS Extraction -->
<link rel="stylesheet" href="/assets/css/new/05-pages/_results.css">
<script src="/components/user-card/user-card.js"></script>

<!-- Block Confirmation Modal -->
<div id="blockConfirmModal" class="block-confirm-modal">
    <div class="block-confirm-overlay"></div>
    <div class="block-confirm-content">
        <div class="block-confirm-icon">
            <i class="fas fa-ban"></i>
        </div>
        <h3 class="block-confirm-title">Block User?</h3>
        <p class="block-confirm-message">Are you sure you want to block <strong id="blockUsername">this user</strong>? They will no longer be able to contact you or see your profile in search results.</p>
        <div class="block-confirm-actions">
            <button class="block-confirm-cancel" id="results-block-cancel-btn">
                <i class="fas fa-times"></i> Cancel
            </button>
            <button class="block-confirm-yes" id="results-block-yes-btn">
                <i class="fas fa-ban"></i> Block User
            </button>
        </div>
    </div>
</div>


    <!-- Email Verification Check Utility -->
    <script src="/assets/js/new/shared/email-verification-check.js"></script>

<div class="search-wrapper">
        <div class="search-container">
            <a href="/search" class="back-to-search">
                <i class="fas fa-arrow-left"></i>
                Back to Search
            </a>

            <div class="card-header card-header-flex">
                <div class="card-header-inner">
                    <div class="card-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <span class="card-title card-title-large">Search results for:</span>
                </div>
                <div id="searchParameters" class="search-parameters-container">
                    <!-- Search parameters will be displayed here -->
                </div>
            </div>

            <!-- Loading State -->
            <div id="loadingContainer" class="loading-container">
                <div class="spinner"></div>
                <p>Searching for your perfect matches...</p>
            </div>

            <!-- Results Section -->
            <div id="resultsSection" style="display: none;">
                <div class="results-header">
                    <div class="results-count">
                        <span id="resultsCount">0 matches found</span>
                    </div>
                    <div class="results-header-controls">
                        <div class="sort-controls">
                            <label for="sortBy">Sort by:</label>
                            <select id="sortBy" name="sortBy">
                                <option value="relevance">Relevance</option>
                                <option value="distance">Distance</option>
                                <option value="age">Age</option>
                                <option value="last_active">Last Active</option>
                            </select>
                        </div>
                        <div class="view-controls">
                            <label for="cardsPerRow">Cards per row:</label>
                            <select id="cardsPerRow" name="cardsPerRow">
                                <option value="3">3</option>
                                <option value="4" selected>4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                            </select>
                        </div>
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="grid" title="Grid View">
                                <i class="fas fa-th"></i>
                            </button>
                            <button class="view-btn" data-view="list" title="List View">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="results-grid" id="resultsGrid">
                    <!-- Results will be populated here -->
                </div>

                <!-- Pagination -->
                <div class="pagination" id="paginationContainer" style="display: none;">
                    <button id="prevPage" class="page-btn">
                        <i class="fas fa-chevron-left"></i> Previous
                    </button>
                    <div id="pageNumbers"></div>
                    <button id="nextPage" class="page-btn">
                        Next <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/assets/js/new/pages/results/results-page.js" defer></script>

    

    <!-- Include Global Error Handler -->
    {{include:global-error-handler}}
    
    <!-- Session Manager -->