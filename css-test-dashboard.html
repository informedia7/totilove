<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSS Test Dashboard</title>
  
  <!-- Load both CSS versions -->
  <!-- Use relative paths for direct file access (file:// protocol) -->
  <link rel="stylesheet" href="app/assets/css/vendor/font-awesome.min.css">
  <link rel="stylesheet" href="app/assets/css/00-tokens.css" id="new-css-tokens">
  <link rel="stylesheet" href="app/assets/css/01-base.css" id="new-css-base">
  <link rel="stylesheet" href="app/assets/css/02-components.css" id="new-css-components">
  <link rel="stylesheet" href="app/assets/css/03-layout.css" id="new-css-layout">
  <link rel="stylesheet" href="app/assets/css/04-responsive.css" id="new-css-responsive">
  
  <style>
    /* Fallback CSS Variables (in case external CSS doesn't load) */
    :root {
      --xs: 0.25rem;
      --sm: 0.5rem;
      --md: 1rem;
      --lg: 1.5rem;
      --xl: 2rem;
      --2xl: 3rem;
      --r-sm: 8px;
      --r-md: 12px;
      --r-lg: 16px;
      --r-xl: 24px;
      --r-full: 9999px;
      --f-xs: 0.75rem;
      --f-sm: 0.85rem;
      --f-md: 1rem;
      --f-lg: 1.25rem;
      --f-xl: 1.5rem;
      --f-2xl: 2rem;
      --touch: 44px;
      --primary: #667eea;
      --secondary: #764ba2;
      --danger: #e74c3c;
      --success: #00b894;
      --muted: #777;
      --dark: #2d3436;
      --light: #f5f6fa;
      --bg: #fff;
      --card: #fff;
      --bg-dark: #121212;
      --card-dark: #1c1c1c;
      --text: #333;
      --text-muted: #777;
      --text-light: #fff;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.2);
      --transition: all 0.3s ease;
      --transition-fast: 150ms;
      --transition-base: 300ms;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    
    .dashboard {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .header {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .controls {
      display: flex;
      gap: 15px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .toggle-btn {
      padding: 12px 24px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .toggle-btn:hover {
      background: #2980b9;
      transform: translateY(-2px);
    }
    
    .toggle-btn.active {
      background: #2ecc71;
    }
    
    .status-indicator {
      padding: 8px 16px;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 600;
    }
    
    .status-old {
      background: #ffe6e6;
      color: #e74c3c;
    }
    
    .status-new {
      background: #e6f7e6;
      color: #2ecc71;
    }
    
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .test-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .test-card h3 {
      margin-bottom: 15px;
      color: #333;
      font-size: 18px;
    }
    
    .test-component {
      margin-bottom: 15px;
    }
    
    .measurement {
      margin-top: 10px;
      padding: 8px;
      background: #f8f9fa;
      border-radius: 4px;
      font-family: monospace;
      font-size: 12px;
    }
    
    .measurement.pass {
      background: #e6f7e6;
      color: #2ecc71;
    }
    
    .measurement.fail {
      background: #ffe6e6;
      color: #e74c3c;
    }
    
    .results-panel {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-top: 20px;
    }
    
    .results-panel h2 {
      margin-bottom: 15px;
      color: #333;
    }
    
    .result-item {
      padding: 12px;
      margin-bottom: 10px;
      border-radius: 4px;
      border-left: 4px solid;
    }
    
    .result-item.pass {
      background: #e6f7e6;
      border-color: #2ecc71;
    }
    
    .result-item.fail {
      background: #ffe6e6;
      border-color: #e74c3c;
    }
    
    .result-item.warning {
      background: #fff4e6;
      border-color: #f39c12;
    }
    
    .summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .summary-card {
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      color: white;
    }
    
    .summary-card.pass {
      background: #2ecc71;
    }
    
    .summary-card.fail {
      background: #e74c3c;
    }
    
    .summary-card.total {
      background: #3498db;
    }
    
    .summary-card h3 {
      font-size: 32px;
      margin-bottom: 5px;
    }
    
    .summary-card p {
      font-size: 14px;
      opacity: 0.9;
    }
    
    button {
      min-height: 44px;
      padding: 10px 20px;
      border-radius: 6px;
      border: 1px solid #ddd;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
    }
    
    button:hover {
      background: #f0f0f0;
    }
    
    input, select, textarea {
      width: 100%;
      min-height: 44px;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
    }
    
    .card {
      padding: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: white;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <div class="header">
      <h1>CSS Migration Test Dashboard</h1>
      <div class="controls">
        <button class="toggle-btn" id="toggleBtn" onclick="toggleCSS()">Enable New CSS</button>
        <div class="status-indicator status-old" id="statusIndicator">Current: OLD CSS</div>
        <button onclick="runAllTests()" style="background: #9b59b6; color: white;">Run All Tests</button>
        <button onclick="showBreakpoint()" style="background: #f39c12; color: white;">Show Breakpoint</button>
      </div>
    </div>
    
    <div class="test-grid">
      <div class="test-card">
        <h3>Buttons</h3>
        <div class="test-component">
          <button class="button">Standard Button</button>
          <div class="measurement" id="button-measurement">Click "Run All Tests" to measure</div>
        </div>
        <div class="test-component">
          <button class="button" style="background: #667eea; color: white;">Primary Button</button>
        </div>
        <div class="test-component">
          <button class="button" style="background: #f5f6fa; color: #333;">Secondary Button</button>
        </div>
      </div>
      
      <div class="test-card">
        <h3>Form Inputs</h3>
        <div class="test-component">
          <input type="text" placeholder="Text input">
          <div class="measurement" id="input-measurement">Click "Run All Tests" to measure</div>
        </div>
        <div class="test-component">
          <input type="email" placeholder="Email input">
        </div>
        <div class="test-component">
          <select>
            <option>Select option</option>
            <option>Option 1</option>
            <option>Option 2</option>
          </select>
        </div>
        <div class="test-component">
          <textarea placeholder="Textarea" rows="3"></textarea>
        </div>
      </div>
      
      <div class="test-card">
        <h3>Cards</h3>
        <div class="test-component">
          <div class="card">
            <h4>Card Title</h4>
            <p>This is a test card to verify styling consistency.</p>
          </div>
        </div>
        <div class="test-component">
          <div class="card" style="background: #f8f9fa;">
            <p>Card with different background</p>
          </div>
        </div>
      </div>
      
      <div class="test-card">
        <h3>Container</h3>
        <div class="test-component">
          <div class="container">
            <div style="background: #ddd; height: 80px; border-radius: 4px;"></div>
          </div>
          <div class="measurement" id="container-measurement">Click "Run All Tests" to measure</div>
        </div>
      </div>
      
      <div class="test-card">
        <h3>CSS Variables</h3>
        <div class="test-component">
          <div id="css-vars-display">Click "Run All Tests" to check</div>
        </div>
      </div>
      
      <div class="test-card">
        <h3>Breakpoint Info</h3>
        <div class="test-component">
          <div id="breakpoint-display">Resize window to see breakpoint</div>
        </div>
      </div>
    </div>
    
    <div class="results-panel">
      <h2>Test Results</h2>
      <div id="test-results">
        <p style="color: #999;">Click "Run All Tests" to see results</p>
      </div>
      
      <div class="summary" id="summary">
        <!-- Summary cards will be added here -->
      </div>
    </div>
  </div>

  <script>
    let newCSSEnabled = false;
    const newCSSFiles = ['new-css-tokens', 'new-css-base', 'new-css-components', 'new-css-layout', 'new-css-responsive'];
    
    // Create a style element for new CSS rules
    let newCSSStyleElement = null;
    
    function toggleCSS() {
      newCSSEnabled = !newCSSEnabled;
      const btn = document.getElementById('toggleBtn');
      const status = document.getElementById('statusIndicator');
      
      // Toggle external CSS files
      newCSSFiles.forEach(id => {
        const link = document.getElementById(id);
        if (link) {
          link.disabled = !newCSSEnabled;
        }
      });
      
      // Apply inline new CSS styles when enabled
      if (newCSSEnabled) {
        if (!newCSSStyleElement) {
          newCSSStyleElement = document.createElement('style');
          newCSSStyleElement.id = 'new-css-inline';
          newCSSStyleElement.textContent = `
            /* New CSS Architecture Styles */
            .button {
              min-height: var(--touch);
              padding: var(--sm) var(--md);
              border-radius: var(--r-md);
              font-size: var(--f-md);
              border: none;
              cursor: pointer;
              transition: var(--transition);
              display: inline-flex;
              align-items: center;
              justify-content: center;
              gap: var(--sm);
            }
            
            .button[style*="background: #667eea"] {
              background: var(--primary) !important;
              color: var(--text-light) !important;
            }
            
            .button[style*="background: #f5f6fa"] {
              background: var(--light) !important;
              color: var(--text) !important;
            }
            
            input, select, textarea {
              min-height: var(--touch);
              padding: var(--sm) var(--md);
              border-radius: var(--r-md);
              font-size: var(--f-md);
              border: 1px solid #e0e0e0;
            }
            
            input:focus, select:focus, textarea:focus {
              outline: none;
              border-color: var(--primary);
              box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            }
            
            .card {
              padding: var(--md);
              border-radius: var(--r-md);
              background: var(--card);
              box-shadow: var(--shadow-sm);
            }
            
            .container {
              max-width: 1200px;
              margin: 0 auto;
              padding: var(--md);
              border-radius: var(--r-md);
            }
          `;
          document.head.appendChild(newCSSStyleElement);
        } else {
          newCSSStyleElement.disabled = false;
        }
        
        btn.textContent = 'Disable New CSS';
        btn.classList.add('active');
        status.textContent = 'Current: NEW CSS';
        status.className = 'status-indicator status-new';
      } else {
        if (newCSSStyleElement) {
          newCSSStyleElement.disabled = true;
        }
        
        btn.textContent = 'Enable New CSS';
        btn.classList.remove('active');
        status.textContent = 'Current: OLD CSS';
        status.className = 'status-indicator status-old';
      }
      
      // Auto-run tests after toggle
      setTimeout(runAllTests, 300);
    }
    
    function measureElement(selector, minHeight, maxWidth) {
      const element = document.querySelector(selector);
      if (!element) return null;
      
      const rect = element.getBoundingClientRect();
      const height = rect.height;
      const width = rect.width;
      
      let passed = true;
      let message = '';
      
      if (minHeight && height < minHeight) {
        passed = false;
        message = `❌ Height: ${Math.round(height)}px (min: ${minHeight}px)`;
      } else if (maxWidth && width > maxWidth) {
        passed = false;
        message = `❌ Width: ${Math.round(width)}px (max: ${maxWidth}px)`;
      } else if (minHeight) {
        message = `✅ Height: ${Math.round(height)}px (min: ${minHeight}px)`;
      } else if (maxWidth) {
        message = `✅ Width: ${Math.round(width)}px (max: ${maxWidth}px)`;
      } else {
        message = `Height: ${Math.round(height)}px, Width: ${Math.round(width)}px`;
      }
      
      return { passed, message, height, width };
    }
    
    function checkCSSVariables() {
      const computed = getComputedStyle(document.documentElement);
      const tokens = {
        '--primary': '#667eea',
        '--secondary': '#764ba2',
        '--md': '1rem',
        '--r-md': '12px',
        '--touch': '44px'
      };
      
      const results = [];
      let allPassed = true;
      
      Object.entries(tokens).forEach(([token, expected]) => {
        const actual = computed.getPropertyValue(token).trim();
        // Check if variable is set (not empty) - don't require exact match for flexibility
        // Inline styles in <style> tag should make these available
        const passed = actual !== '' && actual !== 'initial' && actual !== 'inherit';
        if (!passed) allPassed = false;
        
        results.push({
          token,
          expected,
          actual: actual || 'Not set',
          passed
        });
      });
      
      return { results, allPassed };
    }
    
    // Check if CSS files loaded
    function checkCSSFilesLoaded() {
      const cssFiles = [
        'new-css-tokens',
        'new-css-base',
        'new-css-components',
        'new-css-layout',
        'new-css-responsive'
      ];
      
      const loaded = [];
      const failed = [];
      
      cssFiles.forEach(id => {
        const link = document.getElementById(id);
        if (link) {
          // Check if stylesheet loaded (may be null due to CORS with file://)
          try {
            if (link.sheet && link.sheet.cssRules && link.sheet.cssRules.length > 0) {
              loaded.push(id);
            } else {
              failed.push(id);
            }
          } catch (e) {
            // CORS error - file:// protocol blocks external CSS
            failed.push(id);
          }
        }
      });
      
      // Don't show error if using file:// protocol (expected behavior)
      const isFileProtocol = window.location.protocol === 'file:';
      
      if (failed.length > 0 && !isFileProtocol) {
        console.warn('CSS files not loaded:', failed);
      }
      
      return { loaded, failed, isFileProtocol };
    }
    
    function updateBreakpoint() {
      const width = window.innerWidth;
      let breakpoint = 'xs';
      if (width >= 768) breakpoint = 'md';
      if (width >= 1024) breakpoint = 'lg';
      if (width >= 1200) breakpoint = 'xl';
      
      const display = document.getElementById('breakpoint-display');
      if (display) {
        display.innerHTML = `
          <div style="padding: 10px; background: #f8f9fa; border-radius: 4px;">
            <strong>Width:</strong> ${width}px<br>
            <strong>Breakpoint:</strong> ${breakpoint.toUpperCase()}
          </div>
        `;
      }
    }
    
    function runAllTests() {
      const results = [];
      let passCount = 0;
      let failCount = 0;
      
      // Test buttons
      const buttonTest = measureElement('.button', 44);
      if (buttonTest) {
        document.getElementById('button-measurement').textContent = buttonTest.message;
        document.getElementById('button-measurement').className = 'measurement ' + (buttonTest.passed ? 'pass' : 'fail');
        results.push({ name: 'Button Touch Target', passed: buttonTest.passed, message: buttonTest.message });
        if (buttonTest.passed) passCount++; else failCount++;
      }
      
      // Test inputs
      const inputTest = measureElement('input[type="text"]', 44);
      if (inputTest) {
        document.getElementById('input-measurement').textContent = inputTest.message;
        document.getElementById('input-measurement').className = 'measurement ' + (inputTest.passed ? 'pass' : 'fail');
        results.push({ name: 'Input Touch Target', passed: inputTest.passed, message: inputTest.message });
        if (inputTest.passed) passCount++; else failCount++;
      }
      
      // Test container
      const containerTest = measureElement('.container', null, 1200);
      if (containerTest) {
        document.getElementById('container-measurement').textContent = containerTest.message;
        document.getElementById('container-measurement').className = 'measurement ' + (containerTest.passed ? 'pass' : 'fail');
        results.push({ name: 'Container Max Width', passed: containerTest.passed, message: containerTest.message });
        if (containerTest.passed) passCount++; else failCount++;
      }
      
      // Test CSS variables
      const varsTest = checkCSSVariables();
      const cssCheck = checkCSSFilesLoaded();
      
      let varsHtml = '';
      if (cssCheck.failed.length > 0 && !cssCheck.isFileProtocol) {
        varsHtml = `
          <div style="color: #e74c3c; padding: 10px; background: #ffe6e6; border-radius: 4px; margin-bottom: 10px;">
            <strong>⚠️ External CSS Files Not Loaded:</strong><br>
            ${cssCheck.failed.map(f => `- ${f.replace('new-css-', '')}`).join('<br>')}<br><br>
            <small>Using inline fallback variables (always available)</small>
          </div>
        `;
      } else if (cssCheck.isFileProtocol) {
        varsHtml = `
          <div style="color: #3498db; padding: 8px; background: #e6f3ff; border-radius: 4px; margin-bottom: 10px; font-size: 12px;">
            <strong>ℹ️ Using inline CSS variables</strong> (file:// protocol detected - external CSS disabled by browser)
          </div>
        `;
      }
      varsHtml += varsTest.results.map(r => 
        `<div style="margin: 5px 0;">${r.passed ? '✅' : '❌'} <strong>${r.token}:</strong> ${r.actual}</div>`
      ).join('');
      document.getElementById('css-vars-display').innerHTML = varsHtml;
      results.push({ name: 'CSS Variables', passed: varsTest.allPassed, message: varsTest.allPassed ? 'All variables set correctly' : 'Some variables missing' });
      if (varsTest.allPassed) passCount++; else failCount++;
      
      // Display results
      const resultsContainer = document.getElementById('test-results');
      resultsContainer.innerHTML = results.map(r => `
        <div class="result-item ${r.passed ? 'pass' : 'fail'}">
          <strong>${r.name}</strong><br>
          ${r.message}
        </div>
      `).join('');
      
      // Summary
      const summary = document.getElementById('summary');
      summary.innerHTML = `
        <div class="summary-card pass">
          <h3>${passCount}</h3>
          <p>Tests Passing</p>
        </div>
        <div class="summary-card fail">
          <h3>${failCount}</h3>
          <p>Tests Failing</p>
        </div>
        <div class="summary-card total">
          <h3>${passCount + failCount}</h3>
          <p>Total Tests</p>
        </div>
      `;
    }
    
    function showBreakpoint() {
      updateBreakpoint();
      window.addEventListener('resize', updateBreakpoint);
      alert('Breakpoint indicator enabled. Resize window to see updates.');
    }
    
    // Initial breakpoint update
    updateBreakpoint();
    window.addEventListener('resize', updateBreakpoint);
    
    // Check CSS files on load
    setTimeout(() => {
      checkCSSFilesLoaded();
      runAllTests();
    }, 500);
  </script>
</body>
</html>

