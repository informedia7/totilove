-- Alternative Solution: Keep messages when user is deleted
-- This allows us to use messages table to determine who should see deleted users
-- No migration needed - just update the deleteUser function to NOT delete messages

-- The deleteUser function should:
-- 1. Anonymize user account (real_name = 'Deleted User', etc.)
-- 2. Delete profile images
-- 3. DO NOT DELETE MESSAGES - keep them for conversation history
-- 4. Delete other user data (likes, favorites, etc.)

-- This way:
-- - users_deleted can remain as global list (no receiver_id needed)
-- - Query can use messages table to find who had conversations with deleted users
-- - Users can still see their conversation history with deleted users


































































































































































































