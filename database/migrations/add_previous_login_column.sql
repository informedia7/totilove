-- Migration: Add previous_login column to users table
-- Purpose: Track the previous login time separately from last_login
-- Note: PostgreSQL uses TIMESTAMP, not DATETIME

-- Add previous_login column
ALTER TABLE users 
ADD COLUMN IF NOT EXISTS previous_login TIMESTAMP WITHOUT TIME ZONE NULL;

-- Create index for performance
CREATE INDEX IF NOT EXISTS idx_users_previous_login ON users(previous_login);

-- Add comment for documentation
COMMENT ON COLUMN users.previous_login IS 'Timestamp of the previous login (before the current session). Used for displaying "Last Login" on account page.';










































































































































































