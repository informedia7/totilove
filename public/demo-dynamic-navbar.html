<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Navbar Example - Totilove</title>
    
    <!-- Include session manager for authentication -->
    <script src="/js/session.js"></script>
    
    <!-- Include navbar loader and functionality -->
    <script src="/components/navbar-loader.js"></script>
    <script src="/components/navbar.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            min-height: 100vh;
        }
        
        .main-content {
            padding-top: 80px; /* Account for navbar height */
            padding: 100px 20px 20px;
            text-align: center;
            color: white;
        }
        
        .demo-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            max-width: 600px;
            margin: 0 auto;
        }
        
        .demo-buttons {
            margin-top: 20px;
        }
        
        .demo-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            margin: 5px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .demo-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Navbar will be dynamically loaded here -->
    
    <main class="main-content">
        <div class="demo-card">
            <h1>üéâ Dynamic Navbar Demo</h1>
            <p>This page demonstrates the new dynamic navbar loading system!</p>
            
            <h3>‚ú® Features:</h3>
            <ul style="text-align: left; max-width: 400px; margin: 0 auto;">
                <li>‚úÖ Navbar loaded dynamically via JavaScript</li>
                <li>‚úÖ No hardcoded HTML in this page</li>
                <li>‚úÖ Automatic authentication detection</li>
                <li>‚úÖ Consistent styling across all pages</li>
                <li>‚úÖ Mobile responsive design</li>
                <li>‚úÖ Fast navigation with loading indicators</li>
            </ul>
            
            <div class="demo-buttons">
                <button class="demo-btn" onclick="testNavbarRefresh()">üîÑ Refresh Navbar</button>
                <button class="demo-btn" onclick="testAuthToggle()">üîê Toggle Auth State</button>
                <button class="demo-btn" onclick="showNavbarInfo()">‚ÑπÔ∏è Navbar Info</button>
            </div>
        </div>
    </main>

    <script>
        // Demo functions
        function testNavbarRefresh() {
            console.log('üîÑ Refreshing navbar authentication state...');
            if (window.navbarLoader) {
                window.navbarLoader.refreshAuthState();
                alert('‚úÖ Navbar authentication state refreshed!');
            }
        }
        
        function testAuthToggle() {
            // Simulate authentication toggle for demo
            const isAuth = localStorage.getItem('demo-auth') === 'true';
            localStorage.setItem('demo-auth', !isAuth);
            
            // Mock session manager for demo
            if (!window.sessionManager) {
                window.sessionManager = {
                    isAuthenticated: () => localStorage.getItem('demo-auth') === 'true'
                };
            }
            
            // Refresh navbar to show change
            if (window.navbarLoader) {
                window.navbarLoader.refreshAuthState();
            }
            
            alert(`üîê Demo auth state: ${!isAuth ? 'Authenticated' : 'Public'}`);
        }
        
        function showNavbarInfo() {
            const navbar = document.querySelector('.navbar');
            const info = {
                loaded: !!navbar,
                links: navbar ? navbar.querySelectorAll('a').length : 0,
                authState: window.sessionManager ? window.sessionManager.isAuthenticated() : 'Unknown'
            };
            
            alert(`‚ÑπÔ∏è Navbar Info:\n‚úÖ Loaded: ${info.loaded}\nüîó Links: ${info.links}\nüîê Auth: ${info.authState}`);
        }
        
        // Demo setup
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéØ Demo page loaded - navbar should load automatically');
            
            // Setup demo session manager if it doesn't exist
            if (!window.sessionManager) {
                window.sessionManager = {
                    isAuthenticated: () => localStorage.getItem('demo-auth') === 'true'
                };
            }
        });
    </script>
</body>
</html>
